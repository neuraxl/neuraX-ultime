function getAvatar(mood) {
  switch(mood) {
    case "onirique": return "ðŸ’­";
    case "rationnel": return "ðŸ“Š";
    case "chaotique": return "âš¡";
    default: return "ðŸ§ ";
  }
}

function updateAvatars(logs) {
  const container = document.getElementById('avatars');
  container.innerHTML = '';
  const lastByBot = {};

  logs.forEach(log => {
    lastByBot[log.bot] = log;
  });

  for (const bot in lastByBot) {
    const log = lastByBot[bot];
    const moodIcon = getAvatar(log.mood);
    const div = document.createElement('div');
    div.className = 'avatar mood-' + log.mood;
    div.innerHTML = `<div style="font-size: 40px">${moodIcon}</div><span>${bot}</span>`;
    container.appendChild(div);
  }
}
window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = 'fr-FR';

recognition.onresult = (event) => {
    const userSpeech = event.results[0][0].transcript;
    document.getElementById("userInput").value = userSpeech;
    askAI(); // Envoie la question au chatbot
};

document.getElementById("voiceButton").addEventListener("click", () => {
    recognition.start();
});
