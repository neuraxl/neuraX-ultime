<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuraX-ultime</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #output { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>NeuraX-ultime - Chatbot Créatif</h1>
    <textarea id="inputText" aria-label="Zone de texte pour entrer une question" placeholder="Posez une question à NeuraX" rows="4" cols="50"></textarea>
    <button id="sendBtn" aria-label="Bouton pour envoyer la question">Envoyer</button>

    <div id="output" role="region" aria-live="polite"></div>

    <script>
        const sendBtn = document.getElementById('sendBtn');
        const inputText = document.getElementById('inputText');
        const outputDiv = document.getElementById('output');

        sendBtn.addEventListener('click', async () => {
            const userInput = inputText.value;

            if (!userInput.trim()) {
                outputDiv.innerText = 'Veuillez entrer une question avant d\'envoyer.';
                return;
            }

            try {
                const response = await fetch('http://localhost:3000/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: userInput })
                });

                if (!response.ok) {
                    throw new Error(`Erreur HTTP : ${response.status}`);
                }

                const data = await response.json();
                const outputText = data.choices[0]?.text || 'Aucune réponse reçue.';

                outputDiv.innerText = outputText;

                // Synthèse vocale
                const synth = window.speechSynthesis;
                const utterThis = new SpeechSynthesisUtterance(outputText);
                synth.speak(utterThis);
            } catch (error) {
                outputDiv.innerText = `Une erreur est survenue : ${error.message}`;
            }
        });
    </script>
</body>
</html>
